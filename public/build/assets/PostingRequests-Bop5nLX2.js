import{Q as C}from"./QChip-BKFdpbUD.js";import{D as N,E as B,G as F,r as O,T as I,o as b,c as Q,w as l,g as s,a as t,i as m,h as x,u as c,bU as P,m as U,e as L,f as $,F as j,X as y,t as p}from"./app-CD2aFJMz.js";import{a as z,Q as S}from"./QStepper-BvmLAERt.js";import{Q as D}from"./QSelect-DAcR8xz5.js";import{Q as E}from"./QForm-BBfP4Z3U.js";import{_ as T,a as V,b as v,c as g,Q as Y}from"./MainLayout-BhDzJCbe.js";import{Q as A}from"./QLayout-BZLnjnEC.js";import{u as G}from"./use-quasar-B6weMyZ6.js";import"./use-panel-D-rT1isN.js";import"./selection-BtuRkBgR.js";import"./use-cache-hsIl6Ivw.js";import"./rtl-DFPa-2ov.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const w=N({name:"QStepperNavigation",setup(f,{slots:u}){return()=>B("div",{class:"q-stepper__nav"},F(u.default))}}),R=s("div",{class:"flex justify-between"},[s("div",null,[s("div",{class:"text-title"},"Change Office")])],-1),X=s("br",null,null,-1),H={class:"row q-col-gutter-sm"},J={class:"col-xs-12 col-sm-7"},K={class:"text-grey-7"},M=s("div",{class:"flex q-gutter-sm"},null,-1),W={class:"col-xs-12 col-sm-5"},Z={class:"q-pa-md bg-white"},ee=s("div",{class:"text-lg text-dark"},"Previous Offices",-1),_e=Object.assign({layout:T},{__name:"PostingRequests",props:["offices","office","postings"],setup(f){const u=f,h=G(),o=O({step:1,options:u.offices||[]}),r=I({office:null,agree:!1}),k=(_,a)=>{var e;if(_){const n=(e=u.offices)==null?void 0:e.filter(i=>i.label.includes(_));a(n?()=>{o.options=n}:()=>{o.options=u.offices})}else a(()=>{o.options=u.offices})},q=_=>{r.transform(a=>({office_id:a.office.value})).post(route("posting.store"),{preserveState:!1,onStart:a=>h.loading.show(),onFinish:a=>h.loading.hide(),onSuccess:a=>o.step=1})};return(_,a)=>(b(),Q(A,{padding:"",class:"container"},{default:l(()=>[R,X,s("div",H,[s("div",J,[t(E,{onSubmit:q},{default:l(()=>[t(z,{flat:"",modelValue:o.step,"onUpdate:modelValue":a[4]||(a[4]=e=>o.step=e),vertical:"",color:"primary",animated:""},{default:l(()=>[t(S,{name:1,title:"Your Current Office",icon:"settings",done:o.step>1},{default:l(()=>{var e;return[s("p",K,[m(" Name of the office "),t(C,{square:"",label:(e=f.office)==null?void 0:e.name},null,8,["label"])]),t(w,null,{default:l(()=>[t(x,{onClick:a[0]||(a[0]=n=>o.step=2),color:"primary",label:"Next"})]),_:1})]}),_:1},8,["done"]),t(S,{name:2,title:"Your New Office",icon:"building",done:o.step>2},{default:l(()=>{var e,n,i;return[t(D,{modelValue:c(r).office,"onUpdate:modelValue":a[1]||(a[1]=d=>c(r).office=d),"use-input":"",clearable:"","input-debounce":"500",onFilter:k,options:o.options,outlined:"",rules:[d=>!!d||"Please select your new office"],label:"Select your new office"},null,8,["modelValue","options","rules"]),c(r).office?(b(),Q(P,{key:0,class:"text-grey-7",modelValue:c(r).agree,"onUpdate:modelValue":a[2]||(a[2]=d=>c(r).agree=d),label:"I agree that my current office: "+((e=f.office)==null?void 0:e.name)+" will be changed to : "+((i=(n=c(r))==null?void 0:n.office)==null?void 0:i.label)+" based on approval"},null,8,["modelValue","label"])):U("",!0),M,t(w,{class:"flex q-gutter-sm q-mt-md"},{default:l(()=>[t(x,{type:"submit",disable:!c(r).agree,label:"Submit",color:"primary"},null,8,["disable"]),t(x,{onClick:a[3]||(a[3]=d=>o.step=1),label:"Back",color:"negative"})]),_:1})]}),_:1},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),s("div",W,[s("div",Z,[ee,t(Y,null,{default:l(()=>[(b(!0),L(j,null,$(f.postings,(e,n)=>(b(),Q(V,{key:n},{default:l(()=>[t(v,{avatar:""},{default:l(()=>[t(y,{size:"md",color:"secondary","text-color":"white"},{default:l(()=>{var i;return[m(p((i=e==null?void 0:e.office)==null?void 0:i.name[0]),1)]}),_:2},1024)]),_:2},1024),t(v,null,{default:l(()=>[t(g,null,{default:l(()=>{var i;return[m(p((i=e==null?void 0:e.office)==null?void 0:i.name),1)]}),_:2},1024),t(g,{caption:""},{default:l(()=>[m(p(e==null?void 0:e.status),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),t(V,null,{default:l(()=>[t(v,{avatar:""},{default:l(()=>[t(y,{size:"md",color:"primary","text-color":"white"},{default:l(()=>{var e;return[m(p((e=f.office)==null?void 0:e.name[0]),1)]}),_:1})]),_:1}),t(v,null,{default:l(()=>[t(g,null,{default:l(()=>{var e;return[m(p((e=f.office)==null?void 0:e.name),1)]}),_:1})]),_:1})]),_:1})]),_:1})])])])]),_:1}))}});export{_e as default};
