import{A as h,L as E,o as d,c as _,w as n,a as e,u as f,g as t,t as i,r as P,i as u,X as z,k as B,h as D,e as Q,f as N,F as $,m as j,d as M,C as I,O as F}from"./app-CD2aFJMz.js";import{_ as H,Q as T,b as w,c as y,a as L}from"./MainLayout-BhDzJCbe.js";import{Q as Y}from"./QChip-BKFdpbUD.js";import{Q as R}from"./QLayout-BZLnjnEC.js";import{d as k}from"./date-BNbFJ6l6.js";import{u as K}from"./use-quasar-B6weMyZ6.js";import{$ as U,A as W,S as X,E as G}from"./index.es-Dvo41eUP.js";import{u as J}from"./utils-f6ewzwJT.js";import{_ as Z}from"./KaiCalendar-BolKCiKJ.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QDate-DQAHrZCw.js";import"./use-cache-hsIl6Ivw.js";const tt={style:{"text-align":"center"}},et={class:"text-weight-medium text-primary"},st=t("img",{src:"/assets/images/emp.jpeg",width:"20",height:"50",style:{"margin-top":"8px"}},null,-1),ot={class:"text-caption"},at={__name:"MapView",props:["lat","lng","office","welcomeText"],setup(c){const{MAP_KEY:g}=J(),o=c,l=h(()=>({lat:Number(o==null?void 0:o.lat),lng:Number(o==null?void 0:o.lng)})),x=h(()=>({center:{lat:Number(o==null?void 0:o.office.lat),lng:Number(o==null?void 0:o.office.lng)},radius:Number(o==null?void 0:o.office.radius)}));return E(()=>{}),(b,q)=>(d(),_(f(G),{"api-key":f(g),style:{width:"100%",height:"550px"},center:b.infoPosition,zoom:15},{default:n(()=>[e(f(U),{options:{position:l.value,anchorPoint:"BOTTOM_CENTER"}},{default:n(()=>[t("div",tt,[t("div",et,i(c.welcomeText),1),st])]),_:1},8,["options"]),e(f(W),{options:{position:x.value.center}},{default:n(()=>{var p;return[t("div",ot,i((p=c.office)==null?void 0:p.name),1)]}),_:1},8,["options"]),e(f(X),{options:x.value},null,8,["options"])]),_:1},8,["api-key","center"]))}},nt={class:"row q-col-gutter-sm"},lt={class:"col-xs-12 col-sm-4"},it={class:"column q-pa-xs q-ma-sm-lg bg-white shadow-default"},ct={class:"text-center"},dt={class:"text-weight-medium text-dark"},rt={class:"text-weight-medium text-grey-7 q-ma-none"},ut={class:"text-weight-medium text-grey-7 q-ma-none"},mt={class:"text-bold text-dark"},_t={class:"text-weight-medium text-grey-7 q-ma-none"},ft={class:"text-bold text-dark"},ht={class:"col-xs-12 col-sm-8 q-col-gutter-sm"},gt={class:"row q-col-gutter-sm"},xt={class:"col-xs-12 col-sm-6"},pt={class:"bg-positive text-white q-pa-sm shadow-default"},vt={class:"flex justify-between items-center"},wt={class:"text-xl text-bold"},yt=t("div",{class:"text-md"},"This week: PRESENT",-1),kt={class:"col-xs-12 col-sm-6"},bt={class:"bg-warning text-white q-pa-sm shadow-default"},qt={class:"flex justify-between items-center"},Dt={class:"text-xl text-bold"},Qt=t("div",{class:"text-md"},"This week: LATE",-1),Mt={class:"col-xs-12"},Ct=t("div",{class:"q-pa-sm"},[t("div",{class:"text-lg text-bold text-dark"},"Weekly Attendances")],-1),Nt={class:"flex justify-between items-center shadow-default q-mt-sm bg-white q-pa-sm"},$t={class:"text-lg text-bold text-weight-medium"},Tt={class:"text-sm text-grey-7 text-weight-medium"},Rt=Object.assign({layout:H},{__name:"Dashboard",props:["user","weekly_attendances","current_sessions","office"],setup(c){const g=c,o=K(),l=P({lat:null,lng:null,openMap:!1});h(()=>k.formatDate(Date.now()));const x=a=>k.formatDate(a,"DD/MM/YYYY hh:mm a"),b=a=>k.formatDate(a,"DD/MM/YYYY"),q=a=>k.formatDate(a,"hh:mm a"),p=h(()=>g.weekly_attendances.reduce((a,r,v)=>{const m=r.type==="present"?1:0;return a+m},0)),O=h(()=>g.weekly_attendances.reduce((a,r,v)=>{const m=r.type==="late"?1:0;return a+m},0)),S=a=>{o.dialog({title:"Confirmation",message:"Do you want to sign out this session?",ok:"Yes",cancel:"No"}).onOk(()=>{F.delete(route("attendance.signout",a.id),{onStart:r=>o.loading.show(),onFinish:r=>o.loading.hide()})})},V=a=>{l.openMap=!0};return E(()=>{navigator.geolocation.getCurrentPosition(function(a){l.lat=a.coords.latitude,l.lng=a.coords.longitude})}),(a,r)=>(d(),_(R,{class:"container",padding:""},{default:n(()=>{var v,m,C;return[t("div",nt,[t("div",lt,[t("div",it,[t("div",ct,[e(z,{class:"text-capitalize",size:"32px",color:"orange"},{default:n(()=>{var s;return[u(i((s=c.user)==null?void 0:s.full_name[0]),1)]}),_:1}),t("div",dt,i((v=c.user)==null?void 0:v.full_name),1),t("div",rt,i((m=c.user)==null?void 0:m.designation),1),e(B,{class:"full-width"}),t("div",ut,[u("Latitude: "),t("span",mt,i(l==null?void 0:l.lat),1)]),t("div",_t,[u("Longitude:"),t("span",ft,i(l==null?void 0:l.lng),1)]),e(D,{onClick:V,color:"secondary","no-caps":"",flat:"",label:"View in Map"})]),((C=c.current_sessions)==null?void 0:C.length)>0?(d(),_(T,{key:0,class:"q-pa-none",separator:""},{default:n(()=>[e(L,null,{default:n(()=>[e(w,null,{default:n(()=>[e(y,{class:"text-dark text-lg"},{default:n(()=>[u("Active Sessions")]),_:1})]),_:1})]),_:1}),(d(!0),Q($,null,N(c.current_sessions,s=>(d(),_(L,{key:s.id,class:"q-px-xs"},{default:n(()=>[e(w,{avatar:""},{default:n(()=>[e(M,{name:"error_outline",color:"warning"})]),_:1}),e(w,null,{default:n(()=>[e(y,null,{default:n(()=>[u(i(q(s==null?void 0:s.signin_at)),1)]),_:2},1024),e(y,{caption:""},{default:n(()=>[u(i(b(s==null?void 0:s.signin_at)),1)]),_:2},1024)]),_:2},1024),e(w,{side:""},{default:n(()=>[e(y,{style:{"font-style":"italic","font-size":"13px"}},{default:n(()=>[u("Sign out")]),_:1}),e(D,{onClick:A=>S(s),round:"",icon:"logout"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):j("",!0)]),e(Z,{class:"full-width"})]),t("div",ht,[t("div",gt,[t("div",xt,[t("div",pt,[t("div",vt,[t("div",wt,i(p.value),1),e(M,{size:"26px",name:"person_add_alt"})]),yt])]),t("div",kt,[t("div",bt,[t("div",qt,[t("div",Dt,i(O.value),1),e(M,{size:"26px",name:"o_person_remove"})]),Qt])])]),t("div",Mt,[Ct,e(T,null,{default:n(()=>[(d(!0),Q($,null,N(c.weekly_attendances,s=>(d(),Q("div",Nt,[t("div",null,[t("div",$t,i(q(s.signin_at)),1),t("div",Tt,i(x(s==null?void 0:s.signin_at)),1)]),t("div",null,[s.type==="late"?(d(),_(Y,{key:0,square:"","text-color":"white",color:"warning",label:"Late"})):(d(),_(Y,{key:1,square:"","text-color":"white",color:"positive",label:"Present"}))]),t("div",null,[e(D,{onClick:A=>a.$inertia.get(a.route("attendance.show",s.id)),round:"",flat:"",icon:"o_chevron_right"},null,8,["onClick"])])]))),256))]),_:1})])])]),e(I,{modelValue:l.openMap,"onUpdate:modelValue":r[0]||(r[0]=s=>l.openMap=s)},{default:n(()=>[e(at,{welcomeText:"Hello i am here",lat:l.lat,lng:l.lng,office:c.office},null,8,["lat","lng","office"])]),_:1},8,["modelValue"])]}),_:1}))}});export{Rt as default};
