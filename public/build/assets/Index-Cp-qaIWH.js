import{Q as m}from"./QChip-BKFdpbUD.js";import{r as D,o as i,c as f,w as r,g as s,a,i as g,d as _,n as C,h as u,Q as R,e as q,f as B,F as $,O as I,t as h}from"./app-CD2aFJMz.js";import{Q as P}from"./QDate-DQAHrZCw.js";import{Q as V}from"./QPopupProxy-DVOTFfbx.js";import{_ as F,Q as L,a as T,b as w,c as y}from"./MainLayout-BhDzJCbe.js";import{Q as M}from"./QLayout-BZLnjnEC.js";import{C as N}from"./ClosePopup-BBeWmOkr.js";import{d as b}from"./date-BNbFJ6l6.js";import"./use-cache-hsIl6Ivw.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-quasar-B6weMyZ6.js";const O={class:"flex justify-between items-center"},S=s("div",null,[s("div",{class:"text-title"},"Attendance History")],-1),j={class:"flex q-gutter-sm items-center"},E={class:"row items-center justify-end"},U=s("br",null,null,-1),A={class:"q-ml-xl"},Y={class:"flex items-center q-gutter-sm"},H={class:"flex q-gutter-sm"},se=Object.assign({layout:F},{__name:"Index",props:["list","present","late","from","to"],setup(d){const c=d,n=D({filter:{present:c.present||!1,late:c.late||!1,rangeText:"From: "+c.from+" to:"+c.to,dateRange:{from:c.from||b.formatDate(Date.now(),"Y/MM/DD"),to:c.to||b.formatDate(Date.now(),"Y/MM/DD")}}}),v=l=>b.formatDate(l,"hh:mm a"),x=l=>{var t,o;axios.get(route("attendance.download"),{params:{from:(t=n.filter.dateRange)==null?void 0:t.from,to:(o=n.filter.dateRange)==null?void 0:o.to,...n.filter}}).then(p=>{const{link:e}=p.data;window.open(e,"_blank")})},k=l=>{var t,o;n.filter.rangeText=""+((t=l.from)==null?void 0:t.year)+"/"+l.from.month+"/"+l.from.day+"-"+((o=l.to)==null?void 0:o.year)+"/"+l.to.month+"/"+l.to.day},Q=l=>{var t,o;I.get(route("attendance.index"),{from:(t=n.filter.dateRange)==null?void 0:t.from,to:(o=n.filter.dateRange)==null?void 0:o.to,...n.filter})};return(l,t)=>(i(),f(M,{class:"container",padding:""},{default:r(()=>[s("div",O,[S,s("div",j,[a(m,{outline:!n.filter.present,selected:n.filter.present,"onUpdate:selected":t[0]||(t[0]=o=>n.filter.present=o),color:"primary","text-color":"white"},{default:r(()=>[g(" Present ")]),_:1},8,["outline","selected"]),a(m,{outline:!n.filter.late,selected:n.filter.late,"onUpdate:selected":t[1]||(t[1]=o=>n.filter.late=o),color:"warning","text-color":"white"},{default:r(()=>[g(" Late ")]),_:1},8,["outline","selected"]),a(R,{"hide-bottom-space":"",outlined:"","bg-color":"white",rounded:"",dense:"","model-value":n.filter.rangeText},{append:r(()=>[a(_,{name:"event",class:"cursor-pointer"},{default:r(()=>[a(V,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[a(P,{modelValue:n.filter.dateRange,"onUpdate:modelValue":t[2]||(t[2]=o=>n.filter.dateRange=o),range:"",onRangeEnd:k},{default:r(()=>[s("div",E,[C(a(u,{label:"Close",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"]),a(u,{onClick:Q,color:"primary",rounded:"",label:"Filter","no-caps":""}),a(u,{onClick:x,color:"primary",outline:"",rounded:"",icon:"download","no-caps":""})])]),U,a(L,null,{default:r(()=>{var o,p;return[(i(!0),q($,null,B(d.list.data,e=>(i(),f(T,{onClick:z=>l.$inertia.get(l.route("attendance.show",e.id)),clickable:"",class:"bg-white shadow-default q-mb-sm",key:e.id},{default:r(()=>[a(w,{avatar:""},{default:r(()=>[e.type==="present"?(i(),f(_,{key:0,name:"fiber_manual_record",color:"positive"})):(i(),f(_,{key:1,name:"fiber_manual_record",color:"warning"}))]),_:2},1024),a(w,null,{default:r(()=>[a(y,null,{default:r(()=>[g(h(e==null?void 0:e.formatted_signin),1)]),_:2},1024),a(y,{caption:""},{default:r(()=>[s("span",null,"Sign in: "+h(v(e==null?void 0:e.signin_at)),1),s("span",A,"Sign Out: "+h(e!=null&&e.signout_at?v(e==null?void 0:e.signout_at):"NA"),1)]),_:2},1024)]),_:2},1024),a(w,{side:""},{default:r(()=>[s("div",Y,[e.type==="present"?(i(),f(m,{key:0,class:"text-white",square:"",color:"positive",label:"Present"})):(i(),f(m,{key:1,class:"text-white",square:"",color:"warning",label:"Late"})),a(u,{round:"",flat:"",icon:"o_chevron_right"})])]),_:2},1024)]),_:2},1032,["onClick"]))),128)),s("div",H,[a(u,{onClick:t[3]||(t[3]=e=>l.$inertia.get(d.list.prev_page_url)),disable:!((o=d.list)!=null&&o.prev_page_url),round:"",flat:"",icon:"o_chevron_left"},null,8,["disable"]),a(u,{onClick:t[4]||(t[4]=e=>l.$inertia.get(d.list.next_page_url)),disable:!((p=d.list)!=null&&p.next_page_url),round:"",flat:"",icon:"o_chevron_right"},null,8,["disable"])])]}),_:1})]),_:1}))}});export{se as default};
