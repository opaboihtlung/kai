import{B as M,j as k,r as b,L as C,o as g,e as N,c as Y,u as j,m as B,g as e,A as D,w as A,t as c,a as l,d as h,i as f}from"./app-CD2aFJMz.js";import{Q as P}from"./QDate-DQAHrZCw.js";import{Q as V}from"./QLayout-BZLnjnEC.js";import{_ as H}from"./MainLayout-BhDzJCbe.js";import{d as u}from"./date-BNbFJ6l6.js";import{C as I,A as L,p as Q,a as $,D as E}from"./index-HKW8iyyD.js";import"./use-cache-hsIl6Ivw.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-quasar-B6weMyZ6.js";const F=e("div",{class:"text-lg text-weight-medium"},"Your Attendance Record (Total)",-1),R={__name:"UserPercent",setup(d){const i=M();I.register(L,Q,$);const n=k(!0),y={responsive:!0},m=b({labels:["Present","Late"],datasets:[{backgroundColor:["#41B883","#f68c43"],data:[]}]});return C(()=>{n.value=!0,console.log(i.props.user.id),axios.get(route("statistic.userattendance",i.props.user.id)).then(r=>{const{count_present:_,count_late:t}=r.data,a=[_,t];m.datasets[0].data.push(...a),n.value=!1}).catch(r=>{console.log(r)})}),(r,_)=>(g(),N("div",null,[F,n.value?B("",!0):(g(),Y(j(E),{key:0,data:m,options:y},null,8,["data"]))]))}},q={class:"flex justify-between"},G={class:"text-title"},T={style:{"padding-right":"25%"}},U=e("br",null,null,-1),O={class:"row q-col-gutter-sm"},S={class:"col-xs-12 col-sm-4"},K={class:"shadow-default bg-white q-pa-sm"},Z={class:"flex justify-between items-center"},z=e("div",{class:"text-grey-7"},"Full Name",-1),J={class:"text-grey-7 text-dark"},W={class:"flex justify-between items-center"},X=e("div",{class:"text-grey-7"},"Designation",-1),ee={class:"text-grey-7 text-dark"},te={class:"flex justify-between items-center"},ae=e("div",{class:"text-grey-7"},"Mobile",-1),se={class:"text-grey-7 text-dark"},ne={class:"flex justify-between items-center"},oe=e("div",{class:"text-grey-7"},"Current User",-1),de={class:"text-grey-7 text-dark"},ie=e("br",null,null,-1),re={class:"col-xs-12 col-sm-4"},le={class:"bg-white q-pa-sm shadow-default"},ce={class:"flex justify-between items-center"},ue={class:"col-xs-12 col-sm-8"},me={class:"shadow-default"},we=Object.assign({layout:H},{__name:"Attendances",props:["user","office","attendances"],setup(d){const i=d,n=b({today:u.formatDate(Date.now(),"YYYY/MM/DD"),holidays:[{date:"2024/01/01",name:"New Year's Day"},{date:"2024/01/02",name:"New Year's Celebration"},{date:"2024/01/11",name:"Missionary Day"},{date:"2024/01/26",name:"Republic Day"},{date:"2024/02/20",name:"State Day"},{date:"2024/03/01",name:"Chapchar Kut"},{date:"2024/03/25",name:"Holi"},{date:"2024/03/26",name:"Good Friday"},{date:"2024/04/11",name:"Idu'l Fitr"},{date:"2024/04/21",name:"Mahavir jayanti"},{date:"2024/05/23",name:"Buddha Purnima"},{date:"2024/06/15",name:"YMA Day"},{date:"2024/06/17",name:"Idul'l Zuha"},{date:"2024/06/30",name:"Remna Ni"},{date:"2024/07/06",name:"MHIP Day"},{date:"2024/07/17",name:"Muharram"},{date:"2024/08/15",name:"Independence Day"},{date:"2024/09/16",name:"Id-e-Milad"},{date:"2024/10/02",name:"Mahatma Gandhi's Birthday"},{date:"2024/10/12",name:"Dussehra"},{date:"2024/10/31",name:"Diwali"},{date:"2024/11/15",name:"Guru Nanak's Birthday"},{date:"2024/12/24",name:"Christmas Eve"},{date:"2024/12/25",name:"Christmas Day"},{date:"2024/12/26",name:"Christmas Celebration"},{date:"2024/12/31",name:"New Year's Eve"}]}),y=t=>{const a=u.extractDate(t,"YYYY/MM/DD");return a.getDay()===6||a.getDay()===0||n.holidays.some(s=>s.date===t)?!0:!(a.getTime()>Date.now())},m=t=>{const a=i.attendances.find(s=>u.formatDate(s==null?void 0:s.signin_at,"YYYY/MM/DD")===t),o=n.holidays.some(s=>s.date===t);return a?a.type==="present"?"positive":"warning":o?"red":!1},r=D(()=>{var o;const t=i.attendances.find(s=>u.formatDate(s==null?void 0:s.signin_at,"YYYY/MM/DD")===n.today),a=n.holidays.find(s=>s.date===n.today);return a?a.date:t?`Office:${(o=t==null?void 0:t.office)==null?void 0:o.name} Lat: ${t.lat} Lng: ${t.lng}`:"NA"}),_=D(()=>{const t=i.attendances.find(o=>u.formatDate(o==null?void 0:o.signin_at,"YYYY/MM/DD")===n.today),a=n.holidays.find(o=>o.date===n.today);return a?a.name:t?(t==null?void 0:t.type)==="present"?"Present":"Late":"Absent"});return(t,a)=>(g(),Y(V,{class:"container",padding:""},{default:A(()=>{var o,s,p,v,x;return[e("div",q,[e("div",null,[e("div",G,"Record of "+c((o=d.user)==null?void 0:o.full_name),1)]),e("div",T,[l(h,{name:"radio_button_checked",color:"positive",style:{"margin-right":"0px"}}),f(" - Present "),l(h,{name:"radio_button_checked",color:"warning",style:{"margin-left":"20px"}}),f(" - Late "),l(h,{name:"radio_button_checked",color:"red",style:{"margin-left":"20px"}}),f(" - Holiday "),l(h,{name:"radio_button_unchecked",color:"",style:{"margin-left":"20px"}}),f(" - Absent ")])]),U,e("div",O,[e("div",S,[e("div",K,[e("div",Z,[z,e("div",J,c((s=d.user)==null?void 0:s.full_name),1)]),e("div",W,[X,e("div",ee,c((p=d.user)==null?void 0:p.designation),1)]),e("div",te,[ae,e("div",se,c((v=d.user)==null?void 0:v.mobile),1)]),e("div",ne,[oe,e("div",de,c((x=d.office)==null?void 0:x.name),1)])]),ie,e("div",re,[e("div",le,[e("div",ce,[l(R)])])])]),e("div",ue,[e("div",me,[l(P,{class:"full-width text-lg",style:{height:"450px"},flat:"",events:y,title:_.value,subtitle:r.value,modelValue:n.today,"onUpdate:modelValue":a[0]||(a[0]=w=>n.today=w),"today-btn":"","event-color":m},null,8,["title","subtitle","modelValue"])])])])]}),_:1}))}});export{we as default};
