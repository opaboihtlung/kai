import{r as z,o as d,c as q,w as a,g as e,a as t,d as i,t as c,i as v,e as x,f as Q,F as T,u as r,b as L,Q as N,h as g,O as b,Z as _}from"./app-CD2aFJMz.js";import{_ as V,a as S,b as m,c as p,Q as A}from"./MainLayout-BhDzJCbe.js";import{Q as I}from"./QSpace-BqO1vlbS.js";import{Q as O}from"./QChip-BKFdpbUD.js";import{Q as $}from"./QLayout-BZLnjnEC.js";import{u as D}from"./use-quasar-B6weMyZ6.js";import{u as F}from"./utils-f6ewzwJT.js";import{_ as E}from"./KaiCalendar-BolKCiKJ.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./date-BNbFJ6l6.js";import"./QDate-DQAHrZCw.js";import"./use-cache-hsIl6Ivw.js";const K={class:"row q-col-gutter-sm"},P={class:"col-xs-12 col-sm-4"},U={class:"column q-pa-sm bg-white"},Y={class:"text-center"},Z={class:"text-weight-medium text-dark"},G={class:"text-weight-medium text-grey-7 q-ma-none"},H={class:"col-xs-12 col-sm-8 row q-col-gutter-sm"},J={class:"bg-primary q-pa-sm shadow-default text-white card"},M={class:"flex justify-between items-center"},R={class:"text-xl text-bold"},W=e("div",{class:"text-md text-grey-2"},"No of officials",-1),X={class:"bg-positive q-pa-sm shadow-default text-white card"},ee={class:"flex justify-between items-center"},te={class:"text-xl text-bold"},se=e("div",{class:"text-md text-grey-2"},"Present on Today's",-1),ae={class:"bg-negative q-pa-sm shadow-default text-white card"},oe={class:"flex justify-between items-center"},le={class:"text-xl text-bold"},ne=e("div",{class:"text-md text-grey-2"},"Absent on Today's",-1),ie={class:"bg-blue q-pa-sm shadow-default text-white card"},ce={class:"flex justify-between items-center"},de=e("div",{class:"text-xl text-bold"},"E-Leave",-1),re=e("div",{class:"text-md text-grey-2"},"Leave on Today's",-1),ue={class:"col-xs-12"},_e={class:"q-pa-sm row"},me=e("div",{class:"text-lg text-bold text-dark"},"Absent on Today's",-1),he={class:"flex items-center q-gutter-sm"},fe={class:"q-ml-sm"},ve={class:"text-bold text-weight-medium"},xe=e("div",{class:"text-grey-7 text-weight-medium"}," Signin at: NA ",-1),ge={class:"flex q-gutter-sm"},Ve=Object.assign({layout:V},{__name:"absent",props:["user","devices","attendances","current_sessions","total_users","absent_users","noOfLeave","count_attendances","search"],setup(o){const u=o,h=D(),{formatSignoutTime:be,formatDateTime:B}=F(),C=l=>{h.dialog({title:"Confirmation",message:"Do you want to sign out this session?",ok:"Yes",cancel:"No"}).onOk(()=>{b.delete(route("attendance.signout",l.id),{onStart:n=>h.loading.show(),onFinish:n=>h.loading.hide()})})},y=async l=>{if(l){const n=await b.get(l,{},{preserveState:!0});u.absent_users=n.props.absent_users}},f=z({search:u==null?void 0:u.search,tab:route().current(),selected:null}),j=l=>{b.get(route("dashboard.absent"),{search:f.search})};return(l,n)=>(d(),q($,{class:"container",padding:""},{default:a(()=>{var w,k;return[e("div",K,[e("div",P,[e("div",U,[e("div",Y,[t(i,{size:"32px",name:"o_account_circle"}),e("div",Z,c((w=o.user)==null?void 0:w.full_name),1),e("div",G,c((k=o.user)==null?void 0:k.designation),1)]),t(A,{class:"q-pa-none",separator:""},{default:a(()=>[t(S,null,{default:a(()=>[t(m,null,{default:a(()=>[t(p,{class:"text-dark text-lg"},{default:a(()=>[v("Active Sessions")]),_:1})]),_:1})]),_:1}),(d(!0),x(T,null,Q(o.current_sessions,s=>(d(),q(S,{key:s.id,class:"q-pl-none"},{default:a(()=>[t(m,{avatar:""},{default:a(()=>[t(i,{name:"error_outline",color:"warning"})]),_:1}),t(m,null,{default:a(()=>[t(p,null,{default:a(()=>[v(c(r(B)(s==null?void 0:s.signin_at)),1)]),_:2},1024)]),_:2},1024),t(m,{side:""},{default:a(()=>[t(p,{style:{"font-style":"italic","font-size":"13px"}},{default:a(()=>[v("Sign out")]),_:1}),t(g,{onClick:pe=>C(s),round:"",icon:"logout"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),t(E,{class:"full-width"})]),e("div",H,[t(r(_),{href:l.route("dashboard.totalofficial"),class:"col-xs-12 col-sm-3 custom-link"},{default:a(()=>[e("div",J,[e("div",M,[e("div",R,c(o.total_users),1),t(i,{size:"24px",name:"people_outline"})]),W])]),_:1},8,["href"]),t(r(_),{href:l.route("dashboard.present"),class:"col-xs-12 col-sm-3 custom-link"},{default:a(()=>[e("div",X,[e("div",ee,[e("div",te,c(o.count_attendances),1),t(i,{size:"24px",name:"o_group_add"})]),se])]),_:1},8,["href"]),t(r(_),{href:l.route("dashboard.absent"),class:"col-xs-12 col-sm-3 custom-link"},{default:a(()=>[e("div",ae,[e("div",oe,[e("div",le,c(o.total_users-o.count_attendances),1),t(i,{size:"24px",name:"o_group_remove"})]),ne])]),_:1},8,["href"]),t(r(_),{href:l.route("dashboard.leave"),class:"col-xs-12 col-sm-3 custom-link"},{default:a(()=>[e("div",ie,[e("div",ce,[de,t(i,{size:"24px",name:"event_busy"})]),re])]),_:1},8,["href"]),e("div",ue,[e("div",_e,[me,t(I),t(N,{modelValue:f.search,"onUpdate:modelValue":n[0]||(n[0]=s=>f.search=s),autofocus:"",outlined:"",dense:"",onKeyup:L(j,["enter"]),"bg-color":"white",placeholder:"Type name...."},{append:a(()=>[t(i,{name:"o_search"})]),_:1},8,["modelValue"])]),t(A,null,{default:a(()=>[(d(!0),x(T,null,Q(o.absent_users.data,s=>(d(),x("div",{key:s.id,class:"flex justify-between items-center shadow-default q-mt-sm bg-white q-pa-sm"},[e("div",null,[e("div",he,[t(i,{class:"q-pa-sm",color:s.leaveType==="Absent"||!s.leaveType?"negative":"blue",name:"fiber_manual_record"},null,8,["color"]),e("div",fe,[e("div",ve,c(s.full_name),1),xe])])]),e("div",null,[t(O,{color:s.leaveType==="Absent"||!s.leaveType?"negative":"blue","text-color":"white",label:s.leaveType||"Absent"},null,8,["color","label"])])]))),128)),e("div",ge,[t(g,{color:"primary",onClick:n[1]||(n[1]=s=>y(o.absent_users.prev_page_url)),disable:!o.absent_users.prev_page_url,round:"",flat:"",icon:"o_chevron_left"},null,8,["disable"]),t(g,{color:"primary",onClick:n[2]||(n[2]=s=>y(o.absent_users.next_page_url)),disable:!o.absent_users.next_page_url,round:"",flat:"",icon:"o_chevron_right"},null,8,["disable"])])]),_:1})])])])]}),_:1}))}});export{Ve as default};
