import{r as Z,o as r,c as p,w as t,g as o,a,d as h,t as d,i as u,e as v,f as w,F as b,u as k,m as y,b as G,Q as H,h as g,O as x,Z as R}from"./app-CD2aFJMz.js";import{_ as J,a as m,b as f,c as _,Q as q}from"./MainLayout-BhDzJCbe.js";import{Q as W}from"./QSpace-BqO1vlbS.js";import{Q}from"./QChip-BKFdpbUD.js";import{Q as X}from"./QLayout-BZLnjnEC.js";import{u as ee}from"./use-quasar-B6weMyZ6.js";import{u as ae}from"./utils-f6ewzwJT.js";import{_ as te}from"./KaiCalendar-BolKCiKJ.js";/* empty css                                                                  */import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./date-BNbFJ6l6.js";import"./QDate-DQAHrZCw.js";import"./use-cache-hsIl6Ivw.js";const oe={class:"row q-col-gutter-sm"},se={class:"col-xs-12 col-sm-4"},le={class:"column q-pa-sm bg-white"},ne={class:"text-center"},ce={class:"text-weight-medium text-dark"},de={class:"text-weight-medium text-grey-7 q-ma-none"},re={class:"col-xs-12 col-sm-8 row q-col-gutter-sm"},ie={class:"bg-primary q-pa-sm shadow-default text-white card"},ue={class:"flex justify-between items-center"},_e={class:"text-xl text-bold"},fe=o("div",{class:"text-md text-grey-2"},"No of officials",-1),pe={class:"bg-positive q-pa-sm shadow-default text-white card"},he={class:"flex justify-between items-center"},ge={class:"text-xl text-bold"},ve=o("div",{class:"text-md text-grey-2"},"Present on Today's",-1),xe={class:"bg-negative q-pa-sm shadow-default text-white card"},ke={class:"flex justify-between items-center"},ye={class:"text-xl text-bold"},we=o("div",{class:"text-md text-grey-2"},"Absent on Today's",-1),be={class:"bg-blue q-pa-sm shadow-default text-white card"},me={class:"flex justify-between items-center"},qe=o("div",{class:"text-xl text-bold"},"E-Leave",-1),Ce=o("div",{class:"text-md text-grey-2"},"Leave on Today's",-1),Se={key:0,class:"col-xs-12"},je={class:"q-pa-sm"},Re=o("div",{class:"text-lg text-bold text-dark"},"New Device Request",-1),Qe={class:"flex q-gutter-sm"},Ne={key:1,class:"col-xs-12"},Oe={class:"q-pa-sm"},$e=o("div",{class:"text-lg text-bold text-dark"},"OFFICE On-Duty Request",-1),ze={class:"flex q-gutter-sm"},De={key:2,class:"col-xs-12"},Fe={class:"q-pa-sm"},Ee=o("div",{class:"text-lg text-bold text-dark"},"Late Reason Request",-1),Le={class:"flex q-gutter-sm"},Ye={key:3,class:"col-xs-12"},Ae={class:"q-pa-sm"},Te=o("div",{class:"text-lg text-bold text-dark"},"Left Early Request",-1),Be={class:"flex q-gutter-sm"},Ve={class:"col-xs-12"},Ie={class:"q-pa-sm row"},Pe=o("div",{class:"text-lg text-bold text-dark"},"Today's Attendences",-1),Ke={class:"flex justify-between items-center shadow-default q-mt-sm bg-white q-pa-sm"},Me={class:"flex items-center q-gutter-sm"},Ue={class:"q-ml-sm"},Ze={class:"text-bold text-weight-medium"},Ge={class:"text-grey-7 text-weight-medium"},He={class:"flex q-gutter-sm items-center"},Je={class:"flex q-gutter-sm"},We=o("br",null,null,-1),ha=Object.assign({layout:J},{__name:"Manager",props:["user","devices","attendances","current_sessions","total_users","noOfLeave","count_attendances","search","appeal_attendances","appeal_lateReason","appeal_leftEarly"],setup(i){const C=i,c=ee(),{formatSignoutTime:N,formatDateTime:L}=ae(),Y=n=>{c.dialog({title:"Confirmation",message:"Do you want to approved?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.approveleft",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},A=n=>{c.dialog({title:"Confirmation",message:"Do you want to rejected?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.rejectleft",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},T=n=>{c.dialog({title:"Confirmation",message:"Do you want to approved?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.approvelate",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},B=n=>{c.dialog({title:"Confirmation",message:"Do you want to rejected?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.rejectlate",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},V=n=>{c.dialog({title:"Confirmation",message:"Do you want to approved?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.approve",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},I=n=>{c.dialog({title:"Confirmation",message:"Do you want to rejected?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("appeal.reject",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},P=n=>{c.dialog({title:"Confirmation",message:"Do you want to approved?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("device.approve",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},K=n=>{c.dialog({title:"Confirmation",message:"Do you want to rejected?",ok:"Yes",cancel:"No"}).onOk(()=>{x.post(route("device.reject",n.id),{},{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},M=n=>{c.dialog({title:"Confirmation",message:"Do you want to sign out this session?",ok:"Yes",cancel:"No"}).onOk(()=>{x.delete(route("attendance.signout",n.id),{onStart:l=>c.loading.show(),onFinish:l=>c.loading.hide()})})},S=Z({search:C==null?void 0:C.search,selected:null}),U=n=>{var l;x.get(route("dashboard.present"),{office_ids:(l=S.offices)==null?void 0:l.map(j=>j.value),...S})},O=async n=>{if(n){const l=await x.get(n,{},{preserveState:!0});C.attendances=l.props.attendances}};return(n,l)=>(r(),p(X,{class:"container",padding:""},{default:t(()=>{var j,$,z,D,F,E;return[o("div",oe,[o("div",se,[o("div",le,[o("div",ne,[a(h,{size:"32px",name:"o_account_circle"}),o("div",ce,d((j=i.user)==null?void 0:j.full_name),1),o("div",de,d(($=i.user)==null?void 0:$.designation),1)]),a(q,{class:"q-pa-none",separator:""},{default:t(()=>[a(m,null,{default:t(()=>[a(f,null,{default:t(()=>[a(_,{class:"text-dark text-lg"},{default:t(()=>[u("Active Sessions")]),_:1})]),_:1})]),_:1}),(r(!0),v(b,null,w(i.current_sessions,e=>(r(),p(m,{key:e.id,class:"q-pl-none"},{default:t(()=>[a(f,{avatar:""},{default:t(()=>[a(h,{name:"error_outline",color:"warning"})]),_:1}),a(f,null,{default:t(()=>[a(_,null,{default:t(()=>[u(d(k(L)(e==null?void 0:e.signin_at)),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[a(_,{style:{"font-style":"italic","font-size":"13px"}},{default:t(()=>[u("Sign out")]),_:1}),a(g,{onClick:s=>M(e),round:"",icon:"logout"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),a(te,{class:"full-width"})]),o("div",re,[a(k(R),{href:n.route("dashboard.totalofficial"),class:"col-xs-12 col-sm-3 custom-link"},{default:t(()=>[o("div",ie,[o("div",ue,[o("div",_e,d(i.total_users),1),a(h,{size:"24px",name:"people_outline"})]),fe])]),_:1},8,["href"]),a(k(R),{href:n.route("dashboard.present"),class:"col-xs-12 col-sm-3 custom-link"},{default:t(()=>[o("div",pe,[o("div",he,[o("div",ge,d(i.count_attendances),1),a(h,{size:"24px",name:"o_group_add"})]),ve])]),_:1},8,["href"]),a(k(R),{href:n.route("dashboard.absent"),class:"col-xs-12 col-sm-3 custom-link"},{default:t(()=>[o("div",xe,[o("div",ke,[o("div",ye,d(i.total_users-i.count_attendances),1),a(h,{size:"24px",name:"o_group_remove"})]),we])]),_:1},8,["href"]),a(k(R),{href:n.route("dashboard.leave"),class:"col-xs-12 col-sm-3 custom-link"},{default:t(()=>[o("div",be,[o("div",me,[qe,a(h,{size:"24px",name:"event_busy"})]),Ce])]),_:1},8,["href"]),((z=i.devices)==null?void 0:z.length)>0?(r(),v("div",Se,[o("div",je,[Re,a(q,null,{default:t(()=>[(r(!0),v(b,null,w(i.devices,e=>(r(),p(m,{class:"shadow-default q-mt-sm bg-warning text-white"},{default:t(()=>[a(f,null,{default:t(()=>[a(_,null,{default:t(()=>[u(d(e==null?void 0:e.name),1)]),_:2},1024),a(_,{caption:""},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.full_name),1)]}),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[o("div",Qe,[a(g,{color:"primary",onClick:s=>P(e),round:"",outline:"",size:"sm",icon:"o_check"},null,8,["onClick"]),a(g,{color:"negative",onClick:s=>K(e),round:"",outline:"",size:"sm",icon:"o_close"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})])])):y("",!0),((D=i.appeal_attendances)==null?void 0:D.length)>0?(r(),v("div",Ne,[o("div",Oe,[$e,a(q,null,{default:t(()=>[(r(!0),v(b,null,w(i.appeal_attendances,e=>(r(),p(m,{class:"shadow-default q-mt-sm bg-warning text-white"},{default:t(()=>[a(h,{class:"q-pa-sm",name:"fiber_manual_record",color:"black"}),a(f,null,{default:t(()=>[a(_,null,{default:t(()=>[u(d(e==null?void 0:e.name),1)]),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.full_name),1)]}),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.designation),1)]}),_:2},1024)]),_:2},1024),a(f,null,{default:t(()=>[a(_,{caption:"",style:{color:"black"}},{default:t(()=>[u("Reason: "+d(e==null?void 0:e.reason),1)]),_:2},1024)]),_:2},1024),a(f,null,{default:t(()=>[a(_,{caption:"",style:{color:"white"}},{default:t(()=>[u("("+d(e==null?void 0:e.start_date)+" to "+d(e==null?void 0:e.end_date)+")",1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[o("div",ze,[a(g,{color:"primary",onClick:s=>V(e),round:"",outline:"",size:"sm",icon:"o_check"},null,8,["onClick"]),a(g,{color:"negative",onClick:s=>I(e),round:"",outline:"",size:"sm",icon:"o_close"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})])])):y("",!0),((F=i.appeal_lateReason)==null?void 0:F.length)>0?(r(),v("div",De,[o("div",Fe,[Ee,a(q,null,{default:t(()=>[(r(!0),v(b,null,w(i.appeal_lateReason,e=>(r(),p(m,{class:"shadow-default q-mt-sm bg-warning text-white"},{default:t(()=>[a(h,{class:"q-pa-sm",name:"fiber_manual_record",color:"black"}),a(f,null,{default:t(()=>[a(_,null,{default:t(()=>[u(d(e==null?void 0:e.name),1)]),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.full_name),1)]}),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.designation),1)]}),_:2},1024)]),_:2},1024),a(f,null,{default:t(()=>[a(_,{caption:"",style:{color:"black"}},{default:t(()=>[u("Reason: "+d(e==null?void 0:e.reason),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[a(_,{caption:"",style:{color:"white"}},{default:t(()=>[u("("+d(e==null?void 0:e.start_date)+")",1)]),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>[u(" Signin: "+d(e==null?void 0:e.signin_time),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[o("div",Le,[a(g,{color:"primary",onClick:s=>T(e),round:"",outline:"",size:"sm",icon:"o_check"},null,8,["onClick"]),a(g,{color:"negative",onClick:s=>B(e),round:"",outline:"",size:"sm",icon:"o_close"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})])])):y("",!0),((E=i.appeal_leftEarly)==null?void 0:E.length)>0?(r(),v("div",Ye,[o("div",Ae,[Te,a(q,null,{default:t(()=>[(r(!0),v(b,null,w(i.appeal_leftEarly,e=>(r(),p(m,{class:"shadow-default q-mt-sm bg-warning text-white"},{default:t(()=>[a(h,{class:"q-pa-sm",name:"fiber_manual_record",color:"black"}),a(f,null,{default:t(()=>[a(_,null,{default:t(()=>[u(d(e==null?void 0:e.name),1)]),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.full_name),1)]}),_:2},1024),a(_,{caption:"",style:{color:"black"}},{default:t(()=>{var s;return[u(d((s=e==null?void 0:e.user)==null?void 0:s.designation),1)]}),_:2},1024)]),_:2},1024),a(f,null,{default:t(()=>[a(_,{caption:"",style:{color:"black"}},{default:t(()=>[u("Reason: "+d(e==null?void 0:e.reason),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[a(_,{caption:"",style:{color:"white"}},{default:t(()=>[u("("+d(e==null?void 0:e.start_date)+")",1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:t(()=>[o("div",Be,[a(g,{color:"primary",onClick:s=>Y(e),round:"",outline:"",size:"sm",icon:"o_check"},null,8,["onClick"]),a(g,{color:"negative",onClick:s=>A(e),round:"",outline:"",size:"sm",icon:"o_close"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})])])):y("",!0),o("div",Ve,[o("div",Ie,[Pe,a(W),a(H,{modelValue:S.search,"onUpdate:modelValue":l[0]||(l[0]=e=>S.search=e),autofocus:"",outlined:"",dense:"",onKeyup:G(U,["enter"]),"bg-color":"white",placeholder:"Type name...."},{append:t(()=>[a(h,{name:"o_search"})]),_:1},8,["modelValue"])]),a(q,null,{default:t(()=>[(r(!0),v(b,null,w(i.attendances.data,e=>{var s;return r(),v("div",Ke,[o("div",null,[o("div",Me,[e.type==="present"?(r(),p(h,{key:0,class:"q-pa-sm",name:"fiber_manual_record",color:"positive"})):(r(),p(h,{key:1,class:"q-pa-sm",name:"fiber_manual_record",color:"warning"})),o("div",Ue,[o("div",Ze,d((s=e==null?void 0:e.user)==null?void 0:s.full_name),1),o("div",Ge,"Signin at: "+d(k(N)(e==null?void 0:e.signin_at)),1)])])]),o("div",null,[e.type==="late"?(r(),p(Q,{key:0,"text-color":"white",color:"warning",label:"Late/Left Early"})):y("",!0),e.type==="present"&&(e.in_remark==="late with approval"||e.in_remark==="on-duty with approval"||e.in_remark==="left-early with approval")?(r(),p(Q,{key:1,color:"positive","text-color":"white",label:"Present with Approval",class:"q-ml-sm"})):e.type==="present"?(r(),p(Q,{key:2,color:"positive","text-color":"white",label:"Present"})):y("",!0)]),o("div",He,[e!=null&&e.signout_at?(r(),p(Q,{key:0,square:"",label:k(N)(e==null?void 0:e.signout_at)},null,8,["label"])):y("",!0),a(g,{onClick:Xe=>n.$inertia.get(n.route("attendance.show",e.id)),round:"",flat:"",icon:"o_chevron_right"},null,8,["onClick"])])])}),256)),o("div",Je,[a(g,{color:"primary",onClick:l[1]||(l[1]=e=>O(i.attendances.prev_page_url)),disable:!i.attendances.prev_page_url,round:"",flat:"",icon:"o_chevron_left"},null,8,["disable"]),a(g,{color:"primary",onClick:l[2]||(l[2]=e=>O(i.attendances.next_page_url)),disable:!i.attendances.next_page_url,round:"",flat:"",icon:"o_chevron_right"},null,8,["disable"])])]),_:1})])])]),We]}),_:1}))}});export{ha as default};
