import{j as $,r as N,T as I,o as m,c as p,w as r,g as l,a as t,h as u,t as _,k as U,Q as v,u as i,e as F,f as O,F as A,O as V,d as B,i as x,l as M}from"./app-CD2aFJMz.js";import{Q as E}from"./QForm-BBfP4Z3U.js";import{_ as L,Q as T,a as j,b as k,c as Q}from"./MainLayout-BhDzJCbe.js";import{Q as Y}from"./QLayout-BZLnjnEC.js";import{u as P}from"./use-quasar-B6weMyZ6.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"flex justify-between items-center"},G={class:"flex"},H={style:{"line-height":"0.9"},class:"text-title"},J=l("div",{class:"text-caption text-grey-7"},"Edit user account detail",-1),K={class:"flex q-gutter-sm"},R={class:"row q-col-gutter-sm"},W={class:"col-xs-12 col-sm-7"},X=l("div",{class:"text-lg text-weight-medium text-grey-7 q-mb-sm"},"Account Detail",-1),Z={class:"q-gutter-y-md"},ee={class:"flex q-gutter-sm q-mt-sm"},te={class:"col-xs-12 col-sm-5"},ae={class:"bg-white shadow-default q-pa-sm"},oe=l("div",{class:"text-lg text-weight-medium text-grey-7 q-mb-sm"},"Devices",-1),se={class:"flex q-gutter-sm"},le=l("div",{class:"col-xs-12"},null,-1),pe=Object.assign({layout:L},{__name:"Show",props:["data"],setup(f){const c=f,d=P(),b=$("password"),y=N({submitting:!1}),n=I({employee_no:c.data.employee_no,full_name:c.data.full_name,designation:c.data.designation,mobile:c.data.mobile,password:c.data.password}),q=s=>{n.put(route("account.update",c.data.id),{onStart:e=>d.loading.show(),onFinish:e=>d.loading.hide()})},C=s=>{d.loading.show(),axios.put(route("device.toggle",s.id)).then(e=>{const{message:w}=e.data;d.notify({type:"positive",message:w})}).catch(e=>{console.log(e)}).finally(()=>d.loading.hide())},D=s=>{d.dialog({title:"Confirmation",message:"Do you want to delete?",ok:"Yes",cancel:"No"}).onOk(()=>{V.delete(route("account.destroy",c.data.id),{preserveState:!1,onStart:e=>y.submitting=!0,onFinish:e=>y.submitting=!1})})},h=s=>{d.dialog({title:"Confirmation",message:s==="activate"?"Do you want to Activate this account?":"Do you want to DeActivate this account?",ok:"Yes",cancel:"No"}).onOk(()=>{V.put(route(s==="activate"?"account.activate":"account.deactivate",c.data.id),{preserveState:!1,onStart:e=>y.submitting=!0,onFinish:e=>y.submitting=!1})})},S=s=>{d.dialog({title:"Confirmation",message:"Do you want to delete this device?",ok:"Yes",cancel:"No"}).onOk(()=>{d.loading.show(),axios.delete(route("device.destroy",s.id)).then(e=>{sessionStorage.setItem("deleteMessage",e.data.message),window.location.reload()}).catch(e=>{console.error(e)})})};return window.addEventListener("load",()=>{const s=sessionStorage.getItem("deleteMessage");s&&(d.notify({type:"positive",message:s}),sessionStorage.removeItem("deleteMessage"))}),(s,e)=>(m(),p(Y,{class:"container",padding:""},{default:r(()=>{var w;return[l("div",z,[l("div",G,[t(u,{icon:"arrow_back_ios",round:"",onClick:e[0]||(e[0]=a=>s.$inertia.replace(s.route("account.active")))}),l("div",null,[l("div",H,_((w=f.data)==null?void 0:w.full_name),1),J])]),l("div",K,[f.data.deleted_at?(m(),p(u,{key:0,onClick:e[1]||(e[1]=a=>h("activate")),color:"primary",outline:"",label:"Activate","no-caps":""})):(m(),p(u,{key:1,onClick:e[2]||(e[2]=a=>h("deactivate")),outline:"",label:"Deactivate","no-caps":""})),t(u,{onClick:D,color:"negative",label:"Delete","no-caps":""})])]),t(U,{class:"q-my-sm"}),l("div",R,[l("div",W,[t(E,{onSubmit:q,class:"bg-white shadow-default q-pa-md"},{default:r(()=>{var a,g;return[X,l("div",Z,[t(v,{modelValue:i(n).employee_no,"onUpdate:modelValue":e[3]||(e[3]=o=>i(n).employee_no=o),label:"EmploymentNo",outlined:""},null,8,["modelValue"]),t(v,{modelValue:i(n).full_name,"onUpdate:modelValue":e[4]||(e[4]=o=>i(n).full_name=o),label:"Name",rules:[o=>!!o||"Name is required"],outlined:""},null,8,["modelValue","rules"])]),t(v,{modelValue:i(n).mobile,"onUpdate:modelValue":e[5]||(e[5]=o=>i(n).mobile=o),label:"Mobile","error-message":(g=(a=i(n).errors)==null?void 0:a.mobile)==null?void 0:g.toString(),rules:[o=>!!o||"Mobile is required"],outlined:""},null,8,["modelValue","error-message","rules"]),t(v,{modelValue:i(n).designation,"onUpdate:modelValue":e[6]||(e[6]=o=>i(n).designation=o),label:"Designation",rules:[o=>!!o||"Designation is required"],outlined:""},null,8,["modelValue","rules"]),t(v,{modelValue:i(n).password,"onUpdate:modelValue":e[9]||(e[9]=o=>i(n).password=o),type:b.value,label:"Password",outlined:""},{append:r(()=>[b.value==="password"?(m(),p(u,{key:0,icon:"visibility_off",round:"",onClick:e[7]||(e[7]=o=>b.value="text")})):(m(),p(u,{key:1,icon:"visibility",round:"",onClick:e[8]||(e[8]=o=>b.value="password")}))]),_:1},8,["modelValue","type"]),l("div",ee,[t(u,{type:"submit",label:"Update",color:"primary"}),t(u,{onClick:e[10]||(e[10]=o=>s.$inertia.replace(s.route("account.active"))),label:"Cancel",color:"negative"})])]}),_:1})]),l("div",te,[l("div",ae,[oe,t(T,{separator:""},{default:r(()=>[(m(!0),F(A,null,O(f.data.devices,a=>(m(),p(j,null,{default:r(()=>[t(k,{avatar:""},{default:r(()=>[t(B,{color:a!=null&&a.active?"positive":"warning",name:"fiber_manual_record"},null,8,["color"])]),_:2},1024),t(k,null,{default:r(()=>[t(Q,null,{default:r(()=>[x(_(a==null?void 0:a.name),1)]),_:2},1024),t(Q,{caption:""},{default:r(()=>[x(_(a==null?void 0:a.uid),1)]),_:2},1024)]),_:2},1024),t(k,{side:""},{default:r(()=>[l("div",se,[t(M,{"onUpdate:modelValue":[g=>C(a),g=>a.active=g],modelValue:a.active,color:"green"},null,8,["onUpdate:modelValue","modelValue"]),t(u,{flat:"",round:"",icon:"delete",color:"negative",onClick:g=>S(a)},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),256))]),_:1})])]),le])]}),_:1}))}});export{pe as default};
