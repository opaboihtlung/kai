import{j as r,o as n,c as g,w as i,g as u,a as l,q as b,Q as _,m as v,e as y,t as D,s as I,h as x,v as j,x as q,N as f,y as B,z as N}from"./app-CD2aFJMz.js";import{Q as w}from"./QDate-DQAHrZCw.js";import{Q as O}from"./QLayout-BZLnjnEC.js";import{_ as U}from"./MainLayout-BhDzJCbe.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-cache-hsIl6Ivw.js";import"./date-BNbFJ6l6.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./use-quasar-B6weMyZ6.js";const A=c=>(B("data-v-862cc349"),c=c(),N(),c),E={class:"flex justify-between"},F=A(()=>u("div",{class:"text-h6"},"Appeal",-1)),P={class:"row q-gutter-md"},R={class:"col"},h={key:1,class:"text-negative"},z={class:"col"},M={key:1,class:"text-negative"},G={key:0,class:"text-negative"},H=Object.assign({layout:U},{__name:"OnDuty",setup(c){const p=r(!1),m=r(!1),s=r(""),o=r(""),d=r(""),t=r({}),V=()=>{s.value="",o.value="",d.value="",t.value={}},C=()=>{p.value=!1,m.value=!1},Q=()=>(t.value={},s.value||(t.value.startDate="Start Date is required."),o.value||(t.value.endDate="End Date is required."),d.value||(t.value.reason="Reason field is required."),Object.keys(t.value).length===0),S=async()=>{if(!Q())return;const k={start_date:s.value,end_date:o.value,reason:d.value};try{const e=await q.post("/appeal_onDutyweb",k);if(e.data.status===200)f.create({color:"positive",message:e.data.message,position:"top"}),V(),C();else if(e.data.status===409)f.create({color:"negative",message:e.data.message,position:"top"});else if(e.data.status===429){const a=e.data.errors;f.create({color:"negative",message:"Validation errors occurred: "+Object.values(a).flat().join(", "),position:"top"})}console.log(e.data.message)}catch(e){console.error(e),f.create({color:"red",message:"An error occurred. Please try again later."})}};return(k,e)=>(n(),g(O,{class:"container",padding:""},{default:i(()=>[u("div",E,[u("div",null,[l(j,null,{default:i(()=>[l(b,null,{default:i(()=>[F]),_:1}),l(b,null,{default:i(()=>[u("div",P,[u("div",R,[l(_,{label:"Start Date",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=a=>s.value=a),readonly:"",onClick:e[1]||(e[1]=a=>p.value=!0)},null,8,["modelValue"]),p.value?(n(),g(w,{key:0,modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=a=>s.value=a),onInput:e[3]||(e[3]=a=>p.value=!1)},null,8,["modelValue"])):v("",!0),t.value.startDate?(n(),y("div",h,D(t.value.startDate),1)):v("",!0)]),u("div",z,[l(_,{label:"End Date",modelValue:o.value,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value=a),readonly:"",onClick:e[5]||(e[5]=a=>m.value=!0)},null,8,["modelValue"]),m.value?(n(),g(w,{key:0,modelValue:o.value,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value=a),onInput:e[7]||(e[7]=a=>m.value=!1)},null,8,["modelValue"])):v("",!0),t.value.endDate?(n(),y("div",M,D(t.value.endDate),1)):v("",!0)])]),l(_,{label:"Reason",modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value=a),type:"textarea",autogrow:"",required:""},null,8,["modelValue"]),t.value.reason?(n(),y("div",G,D(t.value.reason),1)):v("",!0)]),_:1}),l(I,{align:"right"},{default:i(()=>[l(x,{label:"Submit",color:"primary",onClick:S}),l(x,{label:"Cancel",color:"negative",flat:"",onClick:V})]),_:1})]),_:1})])])]),_:1}))}}),te=$(H,[["__scopeId","data-v-862cc349"]]);export{te as default};
