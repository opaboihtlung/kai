import{r as I,j as Q,o as p,c as _,w as l,g as i,a as e,h as r,v as B,q as V,Q as C,s as D,C as G,b as N,d as j,e as E,f as F,F as U,O as v,u as L,i as k,t as w}from"./app-CD2aFJMz.js";import{Q as x}from"./QTab-jtlECmSj.js";import{Q as T}from"./QSpace-BqO1vlbS.js";import{Q as z}from"./QTabs-DripzImO.js";import{_ as A,Q as K,a as M,b,c as S}from"./MainLayout-BhDzJCbe.js";import{Q as H}from"./QLayout-BZLnjnEC.js";import{u as J}from"./use-quasar-B6weMyZ6.js";import{S as R}from"./index.es-CSlFEJh2.js";import"./rtl-DFPa-2ov.js";import"./selection-BtuRkBgR.js";import"./FooterComponent-yubzXBYP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"flex justify-between items-center"},X=i("div",null,[i("div",{class:"text-title"},"Master Data"),i("div",{class:"text-caption text-grey-7"}," Edit of master data must be done carefully to avoid application disruption. ")],-1),Y={class:"flex q-gutter-sm"},Z=i("div",{class:"text-h6"},"Set Grace Period",-1),ee=i("br",null,null,-1),ae=i("br",null,null,-1),te={class:"flex q-gutter-sm justify-center q-mt-md"},pe=Object.assign({layout:A},{__name:"Index",props:["list","search"],setup(n){const g=n,u=J(),c=I({search:g==null?void 0:g.search,tab:route().current()}),f=Q(!1),m=Q(null),$=()=>{v.get(route("office.index"),{search:c.search})},P=o=>{v.get(route(o))},q=()=>{m.value?(u.loading.show({message:"Saving grace period..."}),v.post(route("office.graceperiod"),{grace_period:m.value},{onSuccess:()=>{u.notify({type:"positive",message:`Grace period of ${m.value} minutes set successfully for all Offices.`}),f.value=!1},onError:o=>{u.notify({type:"negative",message:"Failed to set grace period. Please try again."})},onFinish:()=>{u.loading.hide()}})):u.notify({type:"negative",message:"Please enter a valid grace period."})};return(o,a)=>(p(),_(H,{class:"container",padding:""},{default:l(()=>{var h,y;return[i("div",W,[X,i("div",Y,[e(r,{onClick:a[0]||(a[0]=t=>f.value=!0),class:"sized-btn q-mr-sm",color:"primary",label:"Set Grace Period for All Offices"}),e(r,{onClick:a[1]||(a[1]=t=>o.$inertia.get(o.route("office.create"))),class:"sized-btn",color:"primary",label:"New Office"})])]),e(G,{modelValue:f.value,"onUpdate:modelValue":a[4]||(a[4]=t=>f.value=t),persistent:""},{default:l(()=>[e(B,{style:{"min-width":"400px"}},{default:l(()=>[e(V,{class:"row items-center"},{default:l(()=>[Z]),_:1}),e(V,null,{default:l(()=>[e(C,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>m.value=t),type:"number",label:"Grace Period (minutes)",filled:""},null,8,["modelValue"])]),_:1}),e(D,{align:"right"},{default:l(()=>[e(r,{flat:"",label:"Cancel",color:"negative",onClick:a[3]||(a[3]=t=>f.value=!1)}),e(r,{flat:"",label:"Save",color:"primary",onClick:q})]),_:1})]),_:1})]),_:1},8,["modelValue"]),ee,e(z,{stretch:"",shrink:"",modelValue:c.tab,"onUpdate:modelValue":[a[6]||(a[6]=t=>c.tab=t),P],align:"start"},{default:l(()=>[e(x,{name:"office.index",label:"Offices"}),e(x,{name:"district.index",label:"Districts"}),e(T),e(C,{modelValue:c.search,"onUpdate:modelValue":a[5]||(a[5]=t=>c.search=t),outlined:"",dense:"",onKeyup:N($,["enter"]),"bg-color":"white",placeholder:"Enter office name"},{append:l(()=>[e(j,{name:"o_search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),ae,e(K,{separator:"",class:"bg-white shadow-default"},{default:l(()=>{var t;return[(p(!0),E(U,null,F((t=n.list)==null?void 0:t.data,(s,O)=>(p(),_(M,{key:O},{default:l(()=>[e(b,{avatar:""},{default:l(()=>{var d;return[e(L(R),{width:50,height:50,value:(d=s==null?void 0:s.qr_code)==null?void 0:d.code},null,8,["value"])]}),_:2},1024),e(b,null,{default:l(()=>[e(S,null,{default:l(()=>[k(w(s.name),1)]),_:2},1024),e(S,{caption:""},{default:l(()=>{var d;return[k(w((d=s.district)==null?void 0:d.name),1)]}),_:2},1024)]),_:2},1024),e(b,{side:""},{default:l(()=>[e(r,{onClick:d=>o.$inertia.get(o.route("office.edit",s==null?void 0:s.id)),icon:"o_chevron_right"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]}),_:1}),i("div",te,[e(r,{disable:!((h=n.list)!=null&&h.prev_page_url),onClick:a[7]||(a[7]=t=>{var s;return o.$inertia.get((s=n.list)==null?void 0:s.prev_page_url)}),flat:"",round:"",icon:"o_chevron_left"},null,8,["disable"]),e(r,{disable:!((y=n.list)!=null&&y.next_page_url),onClick:a[8]||(a[8]=t=>{var s;return o.$inertia.get((s=n.list)==null?void 0:s.next_page_url)}),flat:"",round:"",icon:"o_chevron_right"},null,8,["disable"])])]}),_:1}))}});export{pe as default};
